= AsciiDoc Live Preview for Adobe Brackets
Thomas Kern
:idprefix:
:idseparator: -
:experimental:

This is an extension for http://brackets.io[Adobe Brackets],
which allows for live preview of AsciiDoc documents.

IMPORTANT: Version 1.0.9 is using Asciidoctor 1.5.1 for rendering. This introduces
some small changes to the syntax. Please refer to http://asciidoctor.org/docs/migration/[Migrating to Asciidoctor 1.5.x]
for details.

image::images/preview.jpg[]

Most of the work and credits go to Glenn Ruehle for his 
https://github.com/gruehle/MarkdownPreview[Markdown preview extension],
which I ripped off and modified for AsciiDoc.

The actual formatting is performed by
https://github.com/asciidoctor/asciidoctor.js[Asciidoctor.js],
the JavaScript incarnation of http://asciidoctor.org/[Asciidoctor].

AsciiDoc mode for CodeMirror was created by 
Thaddee Tyl for https://github.com/espadrine/AsciiDocBox[AsciiDocBox], who
converted the highlighting mode from the Ace editor to CodeMirror.


Other software used:

* http://fortawesome.github.io/Font-Awesome/[Font Awesome 4.1.0] for font icons
* http://highlightjs.org/[highlight.js] for highlighting embedded source code
* http://www.mathjax.org/[MathJax] is a JavaScript display engine for mathematics

== Installation

=== Released Version

Using the released version is the recommended way.

From the Brackets file menu, open the extension manager. Browse available extensions and install 'AsciiDoc Preview'.

After installation, an additional icon appears in the Brackets toolbar to the right. If the name of the file currently edited 
ends with one of the suffixes '.adoc', '.ad', '.asciidoc', or '.asc', pressing this icon displays the preview pane.

In the upper right corner of the preview pane, pressing the gear symbol (image:styles/images/gear.svg[width=16]) opens the settings panel.

=== Development Version

In order to install the current development version, you need to have _npm_ installed.
Clone the repository and invoke the following commands from the project's toplevel directory:

----
npm install
grunt dist
----

This will create a zipfile in the current directory which can be installed from the Brackets extension by dropping the
zipfile onto the input area in the dialog's lower left corner.

If you need to install previous versions of the plugin, you may do so by downloading a tagged release 
as a zipfile, unpack the zipfile and proceed in the same way as described above.

== MathJax Support

Rendering of mathematical expressions is now supported by means of http://www.mathjax.org/[MathJax].
Unlike other components used by this plugin, MathJax is not included in the distribution,
but accessed via a CDN.

This means that you'll need a working internet connection in order to be able to see rendered expressions,
at least until MathJax was loaded and cached by Brackets for the first time.

The use of MathJax is disabled by default and must be switched on in the plugin's option panel (gear symbol in the preview pane)
by checking _Render math_. See http://asciidoctor.org/news/2014/08/12/asciidoctor-1-5-0-released/#spotlight-mathjax[Get technical with MathJax].

== Syncing the Preview Pane

It is now possible to synchronize the current editing position in the editor with the corresponding part of the rendered HTML displayed by the preview pane.

After a document has been rendered successfully, pressing the location arrow symbol (image:styles/images/locate.svg[width=16]) scrolls that part of the HTML into view, which corresponds to the current text cursor position in the source document.

In addition, the settings panel provides an btn:[Auto-sync location] option. If this option is enabled, the preview pane will automatically synchronize its position with the part of the document currently being edited.

NOTE: Since synchronization works on the level of paragraphs and blocks, matching is not perfect. It is currently not possible to locate the correct location within a block, but only the start of the whole block. For example, if you are working with long tables or lists, the preview pane will display the start of the table or list, but the location you are editing might still be outside of the viewport.

IMPORTANT: If conversion of your document produced error or warning messages from Asciidoctor, information necessary for syncing isn't available. The location arrow will be hidden until the document has been fixed.

== Known Issues

* Preamble text directly following the title without an empty line in between is completely suppressed.
* In order to create
a TOC in your document, add attributes
+
----
:toc: 
:toc-placement: preamble
----
to the header of your document. Also make sure that your document
really has a preamble. Other values for +toc+ and +toc-placement+
attributes currently not supported.


== Copyright and License

Copyright (C) 2014 Thomas Kern

Licensed under MIT License. See https://raw.githubusercontent.com/nerk/asciidoc-brackets-preview/master/LICENSE.txt[LICENSE] for details.

Based on _MarkdownPreview_, Copyright (C) 2012 Glenn Ruehle.

AsciiDoc mode Copyright (C) 2014 Thaddee Tyl <thaddee.tyl@gmail.com>

Arrow-Icon made by http://yanlu.de[Yannick] from http://www.flaticon.com[www.flaticon.com] is licensed under http://creativecommons.org/licenses/by/3.0/[CC BY 3.0]


